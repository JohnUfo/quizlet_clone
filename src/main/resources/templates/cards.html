<script>
    document.addEventListener("DOMContentLoaded", async function () {
        const cardSetId = document.getElementById("cardSetId").innerText.trim();
        const token = localStorage.getItem("jwt"); // Retrieve JWT from local storage

        if (!token) {
            console.error("JWT token not found. Redirecting to login...");
            window.location.href = "/login"; // Redirect to login page if no token
            return;
        }

        console.log("Fetching cards for Card Set ID:", cardSetId);

        try {
            const response = await fetch(`/cards/allCards/${cardSetId}`, {
                method: "GET",
                headers: {
                    "Authorization": `Bearer ${token}`, // Attach JWT token
                    "Content-Type": "application/json"
                }
            });

            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }

            const text = await response.text();
            console.log("Raw API Response:", text);
            document.getElementById("cards-container").innerText = text;
        } catch (error) {
            console.error("Error fetching cards:", error);
            document.getElementById("cards-container").innerText = "Failed to load cards.";
        }
    });
</script>

<div id="cards-container">Loading...</div>
